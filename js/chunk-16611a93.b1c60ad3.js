(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16611a93"],{"02ff":function(t,e,a){},"159b":function(t,e,a){var s=a("da84"),i=a("fdbc"),n=a("17c2"),r=a("9112");for(var o in i){var l=s[o],c=l&&l.prototype;if(c&&c.forEach!==n)try{r(c,"forEach",n)}catch(d){c.forEach=n}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,i=a("a640"),n=a("ae40"),r=i("forEach"),o=n("forEach");t.exports=r&&o?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var s=a("d039"),i=a("b622"),n=a("2d00"),r=i("species");t.exports=function(t){return n>=51||!s((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,a){"use strict";var s=a("23e7"),i=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"498a":function(t,e,a){"use strict";var s=a("23e7"),i=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"543d":function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),i=a("5899"),n="["+i+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),l=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"65f0":function(t,e,a){var s=a("861d"),i=a("e8b5"),n=a("b622"),r=n("species");t.exports=function(t,e){var a;return i(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?s(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"7d95":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"foodpocket"},[a("navbar"),a("Alert"),a("div",{staticClass:"container"},[a("div",{staticClass:"input-group pt-3"},[a("div",{staticClass:"col-12 input-group mb-3"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newRestaurant,expression:"newRestaurant"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入餐廳名稱"},domProps:{value:t.newRestaurant},on:{input:function(e){e.target.composing||(t.newRestaurant=e.target.value)}}})]),a("div",{staticClass:"col-12 input-group mb-3"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newDate,expression:"newDate"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.newDate},on:{input:function(e){e.target.composing||(t.newDate=e.target.value)}}})]),a("div",{staticClass:"col-12 input-group mb-3"},[a("button",{staticClass:"btn btn-primary w-100",attrs:{type:"button"},on:{click:t.quicklyAdd}},[t._v("快速新增")])])]),a("div",{staticClass:"main-area card text-center"},[a("div",{staticClass:"card-header"},[a("ul",{staticClass:"nav nav-tabs card-header-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"all"===t.visibility},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="all",t.justifyContent="between"}}},[t._v("全部餐廳")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"recommed"===t.visibility},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="recommed",t.justifyContent="end"}}},[t._v("推薦餐廳")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"record"===t.visibility},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="record",t.justifyContent="end"}}},[t._v("歷史紀錄")])])])]),"all"===t.visibility?a("div",{staticClass:"input-group mt-3"},[a("div",{staticClass:"col-12 input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchRestaurant,expression:"searchRestaurant"}],staticClass:"form-control",attrs:{type:"text",placeholder:"搜尋或新增餐廳"},domProps:{value:t.searchRestaurant},on:{input:function(e){e.target.composing||(t.searchRestaurant=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text",on:{click:function(e){t.searchRestaurant=""}}},[t._v("清除")])])])]):t._e(),a("div",{staticClass:"list-length text-right mr-3"},["all"===t.visibility&&""===t.searchRestaurant?a("span",[t._v("總共有 "+t._s(t.restaurantList.length)+" 家餐廳(含0次餐廳)")]):t._e(),"recommed"===t.visibility?a("span",[t._v("推薦 "+t._s(t.restaurantList.length)+" 家餐廳")]):t._e(),"all"===t.visibility&&""!==t.searchRestaurant?a("span",[t._v("總共有 "+t._s(t.searchList.length)+" 家相符的餐廳")]):t._e(),"record"===t.visibility?a("span",[t._v("總共吃了 "+t._s(t.visitRecords.length)+" 餐")]):t._e()]),a("ul",{staticClass:"list-group list-group-flush text-left"},[t._l(t.filteredMethod,(function(e,s){return a("li",{key:s,staticClass:"list-group-item"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"restaurant-list",on:{click:function(a){return a.preventDefault(),t.openNoteModal(e)}}},[a("div",{staticClass:"restaurant-name"},[t._v(" "+t._s(e.restaurant_name)+" "),"record"!==t.visibility&&""!==e.note?a("i",{staticClass:"fas fa-exclamation-circle"}):t._e()]),a("div",{staticClass:"restaurant-description"},["all"===t.visibility?a("div",{staticClass:"lastTime"},[t._v("上次到訪日期： "+t._s(e.visit_dates[0]))]):t._e(),"record"!==t.visibility?a("div",{staticClass:"visited-times"},[t._v("吃過 "+t._s(e.visited)+" 次")]):t._e(),"record"===t.visibility?a("div",{staticClass:"lastTime"},[t._v("日期： "+t._s(e.visit_date))]):t._e()])]),a("div",{staticClass:"button-area",class:t.justifyContent},["all"===t.visibility?a("a",{staticClass:"pencil-icon",on:{click:function(a){return a.preventDefault(),t.openEditModal(e)}}},[a("i",{staticClass:"fas fa-pen"})]):t._e(),"record"!==t.visibility?a("a",{staticClass:"plus-icon",on:{click:function(a){return a.preventDefault(),t.openAddrecordModal(e)}}},[a("i",{staticClass:"fas fa-plus"})]):t._e(),"record"===t.visibility?a("a",{staticClass:"calendar-icon",on:{click:function(a){return a.preventDefault(),t.openEditModal(e)}}},[a("i",{staticClass:"far fa-calendar-alt"})]):t._e()])])])})),"all"===t.visibility&&""!==t.searchRestaurant?a("li",{staticClass:"list-group-item addnew"},[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"restaurant-list"},[a("div",{staticClass:"restaurant-name"},[a("button",{staticClass:"btn btn-info w-100",staticStyle:{"font-weight":"100"},attrs:{type:"button"},on:{click:function(e){return t.addRestaurant(t.searchRestaurant)}}},[t._v("新增"),a("strong",[t._v("- "+t._s(t.searchRestaurant)+" -")]),t._v("餐廳")])])])])]):t._e()],2),a("div",{staticClass:"card-footer d-flex justify-content-between"},["all"===t.visibility&&""===t.searchRestaurant?a("span",[t._v("總共有 "+t._s(t.restaurantList.length)+" 家餐廳")]):t._e(),"all"===t.visibility&&""!==t.searchRestaurant?a("span",[t._v("總共有 "+t._s(t.searchList.length)+" 家相符的餐廳")]):t._e(),"recommed"===t.visibility?a("span",[t._v("推薦 "+t._s(t.restaurantList.length)+" 家餐廳")]):t._e(),"record"===t.visibility?a("span",[t._v("總共吃了 "+t._s(t.visitRecords.length)+" 餐")]):t._e()])])]),a("div",{staticClass:"modal fade",attrs:{id:"openNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"noteModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"text-left"},[t._v(" "+t._s(t.tempnote)+" ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"restaurantModal",tabindex:"-1",role:"dialog","aria-labelledby":"restaurantModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"restaurantModalLabel"}},["all"===t.visibility?a("span",[t._v("編輯 "+t._s(t.tempname)+" 名稱")]):t._e(),"record"===t.visibility?a("span",[t._v("編輯到訪 "+t._s(t.tempname)+" 日期")]):t._e()]),t._m(3)]),a("div",{staticClass:"modal-body"},["all"===t.visibility?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("餐廳名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelRestaurant.restaurant_name,expression:"modelRestaurant.restaurant_name"}],staticClass:"form-control mb-2",attrs:{type:"text",id:"name",placeholder:"請輸入餐廳名稱"},domProps:{value:t.modelRestaurant.restaurant_name},on:{input:function(e){e.target.composing||t.$set(t.modelRestaurant,"restaurant_name",e.target.value)}}}),a("label",{attrs:{for:"note"}},[t._v("備註")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelRestaurant.note,expression:"modelRestaurant.note"}],staticClass:"form-control",attrs:{type:"text",id:"note",placeholder:"任何備註都可以打在這裡"},domProps:{value:t.modelRestaurant.note},on:{input:function(e){e.target.composing||t.$set(t.modelRestaurant,"note",e.target.value)}}})]):t._e(),"record"===t.visibility?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"date"}},[t._v("最近到訪日期")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelRestaurant.visit_date,expression:"modelRestaurant.visit_date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.modelRestaurant.visit_date},on:{input:function(e){e.target.composing||t.$set(t.modelRestaurant,"visit_date",e.target.value)}}})]):t._e()]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.openDeleteModal}},[t._v("刪除")]),a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),"all"===t.visibility?a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.editRestaurant(t.modelRestaurant)}}},[t._v("確認")]):t._e(),"record"===t.visibility?a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.editVisitRecord(t.modelRestaurant)}}},[t._v("確認")]):t._e()])])])]),a("div",{staticClass:"modal fade",attrs:{id:"addRecordModal",tabindex:"-1",role:"dialog","aria-labelledby":"addRecordModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"addModalLabel"}},[a("span",[t._v("新增到訪 "+t._s(t.tempname)+" 日期")])]),t._m(4)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"date"}},[t._v("最近到訪日期")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelRestaurant.visit_date,expression:"modelRestaurant.visit_date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.modelRestaurant.visit_date},on:{input:function(e){e.target.composing||t.$set(t.modelRestaurant,"visit_date",e.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.addVisitRecord(t.modelRestaurant)}}},[t._v("確認")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delRestaurantModal",tabindex:"-1",role:"dialog","aria-labelledby":"delRestaurantModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-danger text-white"},["all"===t.visibility?a("h5",{staticClass:"modal-title",attrs:{id:"delRestaurantModalLabel"}},[a("span",[t._v("刪除餐廳")])]):t._e(),"record"===t.visibility?a("h5",{staticClass:"modal-title",attrs:{id:"delRestaurantModalLabel"}},[a("span",[t._v("刪除到訪紀錄")])]):t._e(),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.doNotDelete(t.modelRestaurant)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},["all"===t.visibility?a("div",[t._v(" 警告！"),a("br"),t._v(" 刪除"),a("strong",{staticClass:"text-danger"},[t._v(" "+t._s(t.tempname)+" ")]),t._v("餐廳後"),a("br"),t._v(" 所有造訪此餐廳的紀錄也將⼀併刪除 ")]):t._e(),"record"===t.visibility?a("div",[t._v(" 是否刪除"),a("br"),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempdate)+" ")]),t._v("到訪"),a("strong",[t._v(" "+t._s(t.tempname)+" ")]),t._v("的紀錄？ ")]):t._e(),a("div",[t._v("(刪除後將無法恢復)")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.doNotDelete(t.modelRestaurant)}}},[t._v("取消")]),"all"===t.visibility?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.removeRestaurant(t.modelRestaurant)}}},[t._v("確認刪除")]):t._e(),"record"===t.visibility?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.removeVisitRecord(t.modelRestaurant)}}},[t._v("確認刪除")]):t._e()])])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("餐廳名稱")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("到訪日期")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-warning text-dark py-2"},[a("h5",{staticClass:"modal-title",attrs:{id:"noteModalLabel"}},[a("span",[t._v("備註")])]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],n=(a("4160"),a("c975"),a("fb6a"),a("498a"),a("159b"),a("1157")),r=a.n(n),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar"},[a("h1",[t._v("FoodPocket 食物口袋")]),a("div",{staticClass:"logout"},[a("button",{staticClass:"btn btn-info btn-sm",on:{click:t.logout}},[t._v("登出")])])])},l=[],c={methods:{logout:function(){this.$cookies.isKey("token")&&this.$cookies.remove("token"),window.alert("登出成功"),this.$router.push("/loginpage")}}},d=c,u=(a("b2ef"),a("2877")),v=Object(u["a"])(d,o,l,!1,null,"77094f42",null),p=v.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible py-2 m-0",class:"alert-"+e.status},[t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close p-2",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},h=[],f=(a("a434"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),3e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}}),b=f,g=(a("93c5"),Object(u["a"])(b,m,h,!1,null,null,null)),_=g.exports,C={components:{navbar:p,Alert:_},data:function(){return{token:"",searchRestaurant:"",newRestaurant:"",newRestaurant_uid:"",newDate:this.changedateFormat(Math.floor(new Date(Math.floor(Date.now())).getTime()/1e3)),visitRecords:[],restaurantList:[],modelRestaurant:{create_time:"",restaurant_uid:"",restaurant_name:"",visit_date:"",visitrecord_uid:""},tempname:"",tempdate:"",tempnote:"任何備註都可以打在這裡",isNew:!1,visibility:"all",justifyContent:"between"}},created:function(){this.getToken(),this.active()},computed:{reverseRestaurantList:function(){var t=this.restaurantList.slice(0);return t.reverse(),t},trimSearchRestaurant:function(){var t=this.searchRestaurant.trim();return t||t},searchList:function(){var t=this,e=[];this.restaurantList.forEach((function(a){var s=a.restaurant_name,i=t.trimSearchRestaurant,n=s.toUpperCase().indexOf(i.toUpperCase());n>=0&&e.push(s)}));for(var a=[],s=function(s){e.forEach((function(e){t.restaurantList[s].restaurant_name===e&&a.push(t.restaurantList[s])}))},i=0;i<this.restaurantList.length;i++)s(i);return a},filteredMethod:function(){return"all"===this.visibility?""!==this.trimSearchRestaurant?this.searchList:this.restaurantList:"recommed"===this.visibility?this.reverseRestaurantList:"record"===this.visibility?this.visitRecords:""}},methods:{getToken:function(){this.$cookies.isKey("token")?(this.token=this.$cookies.get("token"),this.initList()):this.$router.push("/loginpage")},getRestaurantList:function(){var t=this,e="https://brycehuang.com/api/rest/getRestaurantList/",a=this;this.$http.get(e,{params:{user_token:a.token}}).then((function(t){a.restaurantList=t.data.data})).catch((function(e){401===e.response.status&&t.$router.push("/loginpage")}))},getVisitRecords:function(){var t=this,e="https://brycehuang.com/api/rest/getVisitRecords/",a=this;this.$http.get(e,{params:{user_token:a.token}}).then((function(t){a.visitRecords=t.data.data})).catch((function(e){401===e.response.status&&t.$router.push("/loginpage")}))},initList:function(){this.getRestaurantList(),this.getVisitRecords()},quicklyAdd:function(){var t=Math.floor(new Date(this.newDate).getTime()/1e3),e=this.changedateFormat(t),a=this.newRestaurant.trim();if(a){var s=a.toUpperCase(),i=[],n=this.restaurantList;n.forEach((function(t){var e=t.restaurant_name,a=e.toUpperCase();i.push(a)}));var r=i.indexOf(s);this.isNew=-1===r,!0===this.isNew?(console.log("這是新的餐廳，已加入餐廳列表中，並同時增加次數一次"),this.quicklyAddRestaurant(a,e)):(console.log("這間餐廳已經存在，已增加次數一次"),this.newRestaurant_uid=this.restaurantList[r].restaurant_uid,this.quicklyAddVisit(this.newRestaurant_uid,e)),this.newRestaurant="",this.newDate=this.changedateFormat(Math.floor(new Date(Math.floor(Date.now())).getTime()/1e3))}},quicklyAddRestaurant:function(t,e){var a=this,s="https://brycehuang.com/api/rest/newRestaurant/",i=new FormData;i.append("name",t),i.append("user_token",this.token),this.axios.post(s,i).then((function(t){a.newRestaurant_uid=t.data.data.restaurant_uid,a.quicklyAddVisit(a.newRestaurant_uid,e)})).catch((function(t){401===t.response.status&&a.$router.push("/loginpage")}))},quicklyAddVisit:function(t,e){var a=this,s="https://brycehuang.com/api/rest/newVisit/",i=new FormData;i.append("user_token",this.token),i.append("restaurant_uid",t),i.append("visit_date",e),this.axios.post(s,i).then((function(t){a.initList()})).catch((function(t){401===t.response.status&&a.$router.push("/loginpage")}))},addRestaurant:function(t){var e=this,a=t.trim();if(a){var s=a.toUpperCase(),i=[],n=this.restaurantList;n.forEach((function(t){var e=t.restaurant_name,a=e.toUpperCase();i.push(a)}));var r=i.indexOf(s);if(this.isNew=-1===r,!0===this.isNew){console.log("這是新的餐廳，已加入餐廳列表中");var o="https://brycehuang.com/api/rest/newRestaurant/",l=new FormData;l.append("user_token",this.token),l.append("name",a),this.axios.post(o,l).then((function(t){e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))}else this.$bus.$emit("message:push","這間餐廳已經存在","danger")}},editRestaurant:function(t){var e=this;if(this.tempnote!==t.note||this.tempname!==t.restaurant_name)if(""!==t.restaurant_name){var a="https://brycehuang.com/api/rest/editRestaurant/",s=new FormData;s.append("user_token",this.token),s.append("restaurant_uid",t.restaurant_uid),s.append("name",t.restaurant_name),s.append("note",t.note),this.axios.post(a,s).then((function(t){console.log("成功編輯餐廳名稱或備註"),r()("#restaurantModal").modal("hide"),e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))}else console.log("並未改變"),r()("#restaurantModal").modal("hide");else console.log("並未改變"),r()("#restaurantModal").modal("hide")},removeRestaurant:function(t){var e=this,a="https://brycehuang.com/api/rest/removeRestaurant/",s=new FormData;s.append("user_token",this.token),s.append("restaurant_uid",t.restaurant_uid),this.axios.post(a,s).then((function(t){console.log("成功刪除"),r()("#delRestaurantModal").modal("hide"),e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))},addVisitRecord:function(t){var e=this,a="https://brycehuang.com/api/rest/newVisit/",s=new FormData;s.append("user_token",this.token),s.append("restaurant_uid",t.restaurant_uid),s.append("visit_date",t.visit_date),this.axios.post(a,s).then((function(t){r()("#addRecordModal").modal("hide"),e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))},editVisitRecord:function(t){var e=this;if(this.tempdate!==t.visit_date){var a="https://brycehuang.com/api/rest/editVisitRecord/",s=new FormData;s.append("user_token",this.token),s.append("visitrecord_uid",t.visitrecord_uid),s.append("visit_date",t.visit_date),this.axios.post(a,s).then((function(t){console.log("成功編輯造訪日期"),r()("#restaurantModal").modal("hide"),e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))}else console.log("造訪日期並未改變"),r()("#restaurantModal").modal("hide")},removeVisitRecord:function(t){var e=this,a="https://brycehuang.com/api/rest/removeVisitRecord/",s=new FormData;s.append("user_token",this.token),s.append("visitrecord_uid",t.visitrecord_uid),this.axios.post(a,s).then((function(t){console.log("成功刪除"),r()("#delRestaurantModal").modal("hide"),e.initList()})).catch((function(t){401===t.response.status&&e.$router.push("/loginpage")}))},openAddrecordModal:function(t){r()("#addRecordModal").modal("show"),this.modelRestaurant=Object.assign({},t),this.tempname=this.modelRestaurant.restaurant_name;var e=Math.floor(new Date(Math.floor(Date.now())).getTime()/1e3);this.modelRestaurant.visit_date=this.changedateFormat(e)},openEditModal:function(t){r()("#restaurantModal").modal("show"),this.modelRestaurant=Object.assign({},t),this.tempname=this.modelRestaurant.restaurant_name,this.tempdate=this.modelRestaurant.visit_date,this.tempnote=this.modelRestaurant.note},openDeleteModal:function(){r()("#delRestaurantModal").modal("show"),r()("#restaurantModal").modal("hide")},openNoteModal:function(t){t.note&&(r()("#openNoteModal").modal("show"),this.modelRestaurant=Object.assign({},t),this.tempnote=this.modelRestaurant.note)},doNotDelete:function(t){r()("#delRestaurantModal").modal("hide"),this.openEditModal(t),console.log("取消刪除")},changedateFormat:function(t){var e=new Date(1e3*t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();if(s<10){var n="0"+s;if(i<10){var r="0"+i,o=String(a)+"-"+String(n)+"-"+String(r);return o}var l=String(a)+"-"+String(n)+"-"+String(i);return l}if(i<10){var c="0"+i;if(s<10){var d="0"+s,u=String(a)+"-"+String(d)+"-"+String(c);return u}var v=String(a)+"-"+String(s)+"-"+String(c);return v}var p=String(a)+"-"+String(s)+"-"+String(i);return p},active:function(){document.body.addEventListener("touchend",(function(){}))}}},y=C,R=(a("b899"),Object(u["a"])(y,s,i,!1,null,"2a15663f",null));e["default"]=R.exports},8418:function(t,e,a){"use strict";var s=a("c04e"),i=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var r=s(e);r in t?i.f(t,r,n(0,a)):t[r]=a}},"93c5":function(t,e,a){"use strict";var s=a("543d"),i=a.n(s);i.a},a434:function(t,e,a){"use strict";var s=a("23e7"),i=a("23cb"),n=a("a691"),r=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),v=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!v||!p},{splice:function(t,e){var a,s,d,u,v,p,g=o(this),_=r(g.length),C=i(t,_),y=arguments.length;if(0===y?a=s=0:1===y?(a=0,s=_-C):(a=y-2,s=h(m(n(e),0),_-C)),_+a-s>f)throw TypeError(b);for(d=l(g,s),u=0;u<s;u++)v=C+u,v in g&&c(d,u,g[v]);if(d.length=s,a<s){for(u=C;u<_-s;u++)v=u+s,p=u+a,v in g?g[p]=g[v]:delete g[p];for(u=_;u>_-s+a;u--)delete g[u-1]}else if(a>s)for(u=_-s;u>C;u--)v=u+s-1,p=u+a-1,v in g?g[p]=g[v]:delete g[p];for(u=0;u<a;u++)g[u+C]=arguments[u+2];return g.length=_-s+a,d}})},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var s=a("83ab"),i=a("d039"),n=a("5135"),r=Object.defineProperty,o={},l=function(t){throw t};t.exports=function(t,e){if(n(o,t))return o[t];e||(e={});var a=[][t],c=!!n(e,"ACCESSORS")&&e.ACCESSORS,d=n(e,0)?e[0]:l,u=n(e,1)?e[1]:void 0;return o[t]=!!a&&!i((function(){if(c&&!s)return!0;var t={length:-1};c?r(t,1,{enumerable:!0,get:l}):t[1]=1,a.call(t,d,u)}))}},b2ef:function(t,e,a){"use strict";var s=a("dd53"),i=a.n(s);i.a},b727:function(t,e,a){var s=a("0366"),i=a("44ad"),n=a("7b0b"),r=a("50c4"),o=a("65f0"),l=[].push,c=function(t){var e=1==t,a=2==t,c=3==t,d=4==t,u=6==t,v=5==t||u;return function(p,m,h,f){for(var b,g,_=n(p),C=i(_),y=s(m,h,3),R=r(C.length),w=0,x=f||o,k=e?x(p,R):a?x(p,0):void 0;R>w;w++)if((v||w in C)&&(b=C[w],g=y(b,w,_),t))if(e)k[w]=g;else if(g)switch(t){case 3:return!0;case 5:return b;case 6:return w;case 2:l.call(k,b)}else if(d)return!1;return u?-1:c||d?d:k}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b899:function(t,e,a){"use strict";var s=a("02ff"),i=a.n(s);i.a},c8d2:function(t,e,a){var s=a("d039"),i=a("5899"),n="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},c975:function(t,e,a){"use strict";var s=a("23e7"),i=a("4d64").indexOf,n=a("a640"),r=a("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,c=n("indexOf"),d=r("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:l||!c||!d},{indexOf:function(t){return l?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},dd53:function(t,e,a){},e8b5:function(t,e,a){var s=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fb6a:function(t,e,a){"use strict";var s=a("23e7"),i=a("861d"),n=a("e8b5"),r=a("23cb"),o=a("50c4"),l=a("fc6a"),c=a("8418"),d=a("b622"),u=a("1dde"),v=a("ae40"),p=u("slice"),m=v("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),f=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!p||!m},{slice:function(t,e){var a,s,d,u=l(this),v=o(u.length),p=r(t,v),m=r(void 0===e?v:e,v);if(n(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return f.call(u,p,m);for(s=new(void 0===a?Array:a)(b(m-p,0)),d=0;p<m;p++,d++)p in u&&c(s,d,u[p]);return s.length=d,s}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-16611a93.b1c60ad3.js.map